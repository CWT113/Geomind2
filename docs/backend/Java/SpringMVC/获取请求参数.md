# 获取请求参数

## 通过ServletAPI获取

原生 Spring 中有一个 HttpServletRequest 对象，它在 SpringMVC 中可以用作请求处理器方法的形参直接使用，而通过它我们就可以直接获取到请求报文的对象。

::: tip

使用 HttpServletRequest 对象获取多个同名参数时，只能获取到第一个值，后面的值获取不到。

例如 `user/list?username=admin&password=123456&hobby=bastetball&hobby=footerball`，hobby 请求参数有多个值，但是只能获取到第一个值。

:::

```java {5,9}
@Controller
@RequestMapping("user")
public class UserController {
  @GetMapping("/list")
  public String list(HttpServletRequest request) {
    String username = request.getParameter("username");
    String password = request.getParameter("password");
    // 当 URL 中有多个同名参数时，HttpServletRequest 只能获取到第一个值
    String hobby = request.getParameter("hobby");
    System.out.println("username: " + username); // admin
    System.out.println("password: " + password); // 123456
    System.out.println("hobby: " + hobby); // basketball
    return "user";
  }
}
```



## 通过形参获取请求参数<失败>

如果把控制器方法的形参和 URL 请求中携带的参数名称设置相同，则 DispatchServlet 会自动将请求中的参数映射到控制器方法的形参参数上。

```java
@Controller
@RequestMapping("user")
public class UserController {
  @GetMapping("list")
  public String list(String username, String password) {
    System.out.println("username = " + username);
    System.out.println("password = " + password);
    return "user";
  }
}
```

>这里一直报错 【HTTP状态 500 - 内部服务器错误】，搜了有帖子说新版本 SpringMVC 中，必须要加 `@RequestParam` 注解才可以。
>
>```java {3,4}
>@GetMapping("list")
>public String list(
>  @RequestParam("username") String username, 
>  @RequestParam("password") String password) {
>  System.out.println("username = " + username);
>  System.out.println("password = " + password);
>  return "user";
>}
>```



## @RequestParam注解

`@RequestParam` 注解主要用于 接收 HTTP 请求参数，常用于 GET 或 POST 请求中提取 URL 的参数值。

常用的属性：

|    属性名     |    默认值    | 作用                                                         |
| :-----------: | :----------: | ------------------------------------------------------------ |
| value 或 name | 方法的参数名 | 参数名，对应 URL 或表单中的参数名称                          |
|   requried    |     true     | 当前参数是否必须携带，默认必须携带                           |
| defaultValue  |      无      | 若请求中没有携带某参数时，可以使用该属性设置默认值，同时，required 属性会自动变为 false |

::: tip 提示

- 当 required 属性为 true，且没有设置 defaultValue 属性时，如果没有携带该属性，请求处理方法会报 【HTTP状态 400 - 错误的请求】；
- 当请求中 没有某个属性 或 有属性但是没有值（如`?username=&password=123`）时，defaultValue 都会被使用；

:::

```java
@Controller
@RequestMapping("user")
public class UserController {
  @GetMapping("list")
  public String list(
    @RequestParam(value = "username", required = true) String username, // username属性必须携带
    @RequestParam(value = "password", required = false, defaultValue = "12345") String password, // password属性可以不携带，默认值为12345
    @RequestParam(value = "hobby") String[] hobby) { // hobby属性必须携带，可以多个值同时携带
    System.out.println("username = " + username); // admin
    System.out.println("password = " + password); // 12345
    System.out.println("hobby = " + Arrays.toString(hobby)); // [a, b]
    return "user";
  }
}
```

此时，通过 `user/list?username=admin&hobby=a&hobby=b` 可以测试出上面的例子。



## @RequestHeader注解

































