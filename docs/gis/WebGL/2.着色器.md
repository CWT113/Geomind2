# 着色器

WebGL 着色器（Shader）是运行在 GPU 上的小程序，用于 <span class="marker-text-highlight"> 控制顶点的处理和像素的颜色渲染 </span>。

既然着色器运行在 GPU 上，因此我们需要编写能够在 GPU 上运行的代码，这样的代码需要提供成对的方法。每对方法中一个叫 <span class="marker-text-highlight"> 顶点着色器 </span>（Vertex Shader），另一个叫 <span class="marker-text-highlight"> 片段着色器 </span>（Fragment Shader），并且使用类似于 C语言的强类型语言 GLSL 编写。

每一对组合起来称作一个 `program` 着色程序。



## 顶点着色器

顶点着色器的作用是 **计算顶点的位置**。根据计算出的一系列顶点位置，WebGL 可以对点、线和三角形在内的图元进行光栅化处理。

::: code-group

```glsl [GLSL]
attribute vec3 a_Position;  // 顶点坐标
attribute vec3 a_Color;     // 顶点颜色
varying vec3 v_Color;       // 传递给片元着色器

void main() {
  gl_Position = vec4(a_Position, 1.0); // 设置顶点位置
  v_Color = a_Color; // 传递颜色
}
```

```html [Script标签]
<!-- 顶点着色器 -->
<script type="x-shader/x-vertex" id="vertexShader">
  attribute vec3 a_Position; // 顶点坐标
  attribute vec3 a_Color; // 顶点颜色
  varying vec3 v_Color; // 传递给片元着色器

  void main() {
    gl_Position = vec4(a_Position, 1.0); // 设置顶点位置
    v_Color = a_Color; // 传递颜色
  }
</script>
```

:::



## 片段着色器

片段着色器的作用是 **计算出当前绘制图元中每个像素的颜色值**。

::: code-group

```glsl [GLSL]
precision mediump float; // 指定浮点精度
varying vec3 v_Color; // 接受来自片元着色器的颜色

void main() {
  gl_FragColor = vec4(v_Color, 1.0); // 输出像素颜色
}
```

```html [Script标签]
<!-- 片元着色器 -->
<script type="x-shader/x-fragment" id="fragmentShader">
  precision mediump float; // 指定浮点精度
  varying vec3 v_Color; // 接受来自片元着色器的颜色

  void main() {
    gl_FragColor = vec4(v_Color, 1.0); // 输出像素颜色
  }
</script>
```

:::



## GLSL 语法